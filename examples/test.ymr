target JavaScript_ExpressJS;

use env;

use cors(
	origin: @env.ALLOWED_ORIGIN
);

auth API-Key as apiKey (
    source: header,
    field: "X-API-Key",
    defaultAccess: public
);

router /api 
    as apiRouter
    header (
        X-API-Key: string
    )
    authenticate apiKey with "admin"
{
    GET /hello?name=string
        as HelloRoute

    POST /person
        as CreatePerson
        body (
            name: string,
            age: int
        )

    include "include.ymr"
}