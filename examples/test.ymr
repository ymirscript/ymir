target Java_SpringBoot;

use env;

use cors(
	origin: @env.ALLOWED_ORIGIN
);

auth API-Key as apiKey (
    source: header,
    field: "X-API-Key",
    defaultAccess: public
);

router /api 
    as apiRouter
    header (
        X-API-Key: string
    )
    authenticate apiKey with "admin"
{
    GET /hello?name=string
        as HelloRoute
        body (
            age: int,
            name: string,
            address: {
                zipCode: int,
                street: string
            }
        )

    POST /person
        as CreatePerson
        body (
            name: string,
            age: int,
            address: {
                zipCode: int,
                street: string
            }
        )
        authenticate apiKey with "admin"

    router /v2
    {
        include "include.ymr"
    }
}

router /another-router
{
    GET /test;
}