target JavaScript_ExpressJS;

use env;

use cors(
	origin: @env.ALLOWED_ORIGIN
);

auth Bearer as apiKey (
    source: header,
    defaultAccess: authenticated
);

router /api 
    as apiRouter
{
    GET /hello?name=string
        as HelloRoute
        body (
            age: int,
            name: string,
            address: {
                zipCode: int,
                street: string
            }
        )

    POST /person
        as CreatePerson
        body (
            name: string,
            age: int,
            address: {
                zipCode: int,
                street: string
            }
        )

    router /v2
    {
        include "include.ymr"
    }
}

router /another-router
{
    GET /test;
}